(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(30)},11:function(e,t,a){e.exports=a.p+"static/media/loader.443293d5.gif"},20:function(e,t,a){e.exports=a(54)},26:function(e,t,a){},27:function(e,t,a){},30:function(e,t){e.exports={YOUTUBE_KEY:Object({NODE_ENV:"production",PUBLIC_URL:"/DT-client"}).YOUTUBE_KEY}},31:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),s=a.n(r),l=(a(26),a(4)),o=a(5),i=a(7),u=a(6),m=a(8),d=(a(27),a(9)),h=a(1),p=a.n(h),f=a(2);var v=function(e){var t=e.accounts,a=e.onEditAccountInfo;return c.a.createElement("div",{className:"overflow-auto",style:{height:"60vh"}},c.a.createElement("h5",null,"Queue"),t.map(function(e,t){return c.a.createElement("div",{key:t,className:"card shadow-sm pointer overflow-hidden mb-2 ".concat(e.current?"bg-secondary text-light":""),onClick:function(){a(e.id)}},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("img",{className:"rounded mr-2",src:e.account_avatar,alt:"",width:"60px",height:"60px"}),c.a.createElement("div",{className:"w-75 d-flex"},c.a.createElement("div",{className:"w-50"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("span",{className:"font-weight-bolder"},e.channel_name.slice(0,12))),e.queue_status?c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("small",{className:"mr-2"},"Queued"),c.a.createElement("span",{className:"font-weight-bolder text-success"},"YES")):c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("small",{className:"mr-2"},"Queued"),c.a.createElement("span",{className:"font-weight-bolder text-danger"},"NO"))),c.a.createElement("div",{className:"w-50"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("small",{className:"mr-2"},"Mins Left"),c.a.createElement("span",{className:"font-weight-bolder"},e.video_duration_remaining)),c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("small",{className:"mr-2"},"Vids Left"),c.a.createElement("span",{className:"font-weight-bolder"},e.upload_videos_remaining))))))}))},g=a(11),E=a.n(g),b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={searchTerms:[],isCurrent:!1,isQueued:!1,searchOrder:null,accountId:null},a.handleSearchTermInput=function(e){e.persist(),13===e.keyCode&&(a.setState({searchTerms:[].concat(Object(d.a)(a.state.searchTerms),[e.target.value])}),document.getElementById("searchTermsInput").value="")},a.handleClearSearchTerm=function(e){a.setState({searchTerms:a.state.searchTerms.filter(function(t){return t!==e})})},a.handleCurrentStateChange=function(){a.setState({isCurrent:!a.state.isCurrent})},a.handleQueueStateChange=function(){a.setState({isQueued:!a.state.isQueued})},a.handleSearchOrderSelect=function(e){a.setState({searchOrder:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.onRequestToDeleteAccount,r=t.onUpdateAccountSettings,s=t.onAddNewAccount;return!1===a?null:"loading"===a?c.a.createElement("div",{className:"col-sm-9 d-flex h-100 w-100"},c.a.createElement("div",{className:"mx-auto my-auto d-flex align-items-center"},c.a.createElement("h4",{className:"mr-3"},"Loading Account Details"),c.a.createElement("img",{height:"50px",src:E.a,alt:""}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-secondary py-0 mb-2 mr-5 d-inline-flex align-items-center",onClick:function(){return s()}},"add new account",c.a.createElement("i",{className:"material-icons md-18"},"add")),c.a.createElement("button",{className:"btn btn-danger text-dark py-0 mb-2 d-inline-flex align-items-center",onClick:function(){return n()}},"delete this account",c.a.createElement("i",{className:"material-icons md-18"},"clear"))),c.a.createElement("div",{className:"mx-0 row my-2 overflow-auto",style:{height:"60vh"}},c.a.createElement("div",{className:"col-sm-6 px-1 mx-0"},c.a.createElement("div",{className:"card shadow-sm py-2"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"text-center flex-fill"},c.a.createElement("img",{className:"img-fluid rounded w-50",src:a.info.avatar_60_url,alt:""}),c.a.createElement("h6",{className:"px-1 pt-1 font-weight-bolder m-0"},a.info.screenname)),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.info.followers_total),c.a.createElement("small",{className:"mb-2"},"followers")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.info.following_total),c.a.createElement("small",{className:"mb-2"},"following")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.info.videos_total),c.a.createElement("small",{className:"mb-2"},"Videos")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.info.views_total),c.a.createElement("small",{className:"mb-2"},"Views")))),c.a.createElement("br",null),c.a.createElement("div",{className:"card shadow-sm p-2"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"border-right border-info w-25 d-flex align-items-center justify-content-center"},c.a.createElement("h6",{className:"font-weight-bolder m-0"},"Revenue")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},c.a.createElement("span",{className:"pr-1"},"\u20ac"),Math.round(100*a.info.revenues_video_total)/100),c.a.createElement("small",{className:""},"Total")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},c.a.createElement("span",{className:"pr-1"},"\u20ac"),Math.round(100*a.info.revenues_video_last_month)/100),c.a.createElement("small",{className:""},"Last Month")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},c.a.createElement("span",{className:"pr-1"},"\u20ac"),Math.round(100*a.info.revenues_video_last_day)/100),c.a.createElement("small",{className:""},"Yesterday")))),c.a.createElement("br",null),c.a.createElement("div",{className:"card shadow-sm p-2"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"border-right border-info w-25 d-flex align-items-center"},c.a.createElement("h6",{className:"font-weight-bolder d-flex flex-fill flex-column text-center"},c.a.createElement("span",{className:"px-1 mx-auto"},"Upload"),c.a.createElement("span",{className:"px-1 mx-auto"},"Limits"))),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.upload.minutes_remaining),c.a.createElement("small",{className:""},"Upload minutes Remaining")),c.a.createElement("div",{className:"d-flex flex-column flex-fill text-center justify-content-center"},c.a.createElement("span",{className:"font-weight-bolder"},a.upload.videos_remaining),c.a.createElement("small",{className:""}," ","Upload videos remaining")))),c.a.createElement("br",null)),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("div",{className:"card shadow-sm p-2"},c.a.createElement("div",{className:"d-flex pt-3 pb-2"},c.a.createElement("h6",{className:"font-weight-bolder "},"Edit Channel Settings")),c.a.createElement("div",{className:"d-flex align-items-center mb-1"},c.a.createElement("span",{className:"w-50"},"Current"),c.a.createElement("div",{className:"custom-control custom-switch font-weight-lighter text-success"},c.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"set-channel-to-current",defaultChecked:a.upload.current,onChange:this.handleCurrentStateChange}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"set-channel-to-current"},this.state.isCurrent?c.a.createElement("span",{className:"text-success"},"Yes"):c.a.createElement("span",{className:"text-danger"},"No")))),c.a.createElement("div",{className:"d-flex align-items-center mb-1"},c.a.createElement("span",{className:"w-50"},"In queue"),c.a.createElement("div",{className:"custom-control custom-switch font-weight-lighter text-success"},c.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"add-channel-to-queue",defaultChecked:a.upload.queue_status,onChange:this.handleQueueStateChange}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"add-channel-to-queue"},this.state.isQueued?c.a.createElement("span",{className:"text-success"},"Yes"):c.a.createElement("span",{className:"text-danger"},"No")))),c.a.createElement("div",{className:"d-flex align-items-center mb-2"},c.a.createElement("span",{className:"w-50 m-0"},"Search By"),c.a.createElement("select",{className:"custom-select w-50 font-weight-lighter py-0",id:"inputGroupSelect01",onChange:this.handleSearchOrderSelect},c.a.createElement("option",{defaultValue:!0},this.state.searchOrder),c.a.createElement("option",{value:"date"},"Date"),c.a.createElement("option",{value:"rating"},"Rating"),c.a.createElement("option",{value:"relevance"},"Relevance"),c.a.createElement("option",{value:"title"},"Title"),c.a.createElement("option",{value:"viewCount"},"View count"))),c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("span",{className:"w-50 m-0"},"Search Terms"),c.a.createElement("input",{type:"text",id:"searchTermsInput",className:"form-control w-50",placeholder:"#",onKeyUp:this.handleSearchTermInput})),c.a.createElement("div",{className:"d-flex flex-wrap flex-reverse my-2"},this.state.searchTerms.map(function(t,a){return c.a.createElement("button",{key:a,className:"btn btn-outline-secondary py-0 mb-2 rounded px-2 mr-1 d-flex align-items-center",onClick:function(){return e.handleClearSearchTerm(t)}},c.a.createElement("span",{className:"mr-2"},t),c.a.createElement("i",{className:"material-icons md-18"},"clear"))})),c.a.createElement("div",{className:"d-flex px-4"},c.a.createElement("button",{className:"ml-auto btn btn-success py-1 px-2",onClick:function(){return r(e.state)}},"save changes"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!1!==e.account&&"loading"!==e.account&&t.accountId!==e.account.upload.id){var a=e.account.upload.search_terms.split(",");return{isCurrent:e.account.upload.current,isQueued:e.account.upload.queue_status,searchTerms:a,searchOrder:e.account.upload.search_order,accountId:e.account.upload.id}}return null}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={disabledDelete:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.onDeleteAccount,r=t.onCancelRequestToDeleteAccount;if(console.log("TCL: ConfirmDeleteAccount -> account",a),!a)return null;for(var s="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<6;o++)s+=l.charAt(Math.floor(Math.random()*l.length));return c.a.createElement("div",{className:"d-flex justify-content-center align-items-center absolute-cover"},c.a.createElement("div",{className:"after-grey",onClick:function(){return r()}}),c.a.createElement("div",{className:"text-center card z-index-3"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h5",{className:"mb-0 px-4 py-3"},"Are you sure you want to delete account",c.a.createElement("span",{className:"mx-2 text-info"},a.info.screenname),"permanently!")),c.a.createElement("div",{className:"py-5"},c.a.createElement("h5",null,"Type",c.a.createElement("span",{className:"mx-2 text-warning"},s),"below to proceed"),c.a.createElement("input",{type:"text",id:"deleteCode",onChange:function(){document.getElementById("deleteCode").value===s&&e.setState({disabledDelete:!1})}})),c.a.createElement("div",{className:"d-flex justify-content-center card-footer"},c.a.createElement("button",{className:"btn mx-2 btn-secondary py-0",onClick:function(){return r()}},"cancel"),c.a.createElement("button",{className:"btn mx-2 btn-danger py-0",id:"deleteButton",disabled:this.state.disabledDelete,onClick:function(){return n()}},"delete"))))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={error:"",searchTerms:[],apiKey:"",apiSecret:"",channelUsername:"",channelPassword:"",searchOrder:""},a.handleSearchTermInput=function(e){e.persist(),13===e.keyCode&&(a.setState({searchTerms:[].concat(Object(d.a)(a.state.searchTerms),[e.target.value])}),document.getElementById("searchTermsInput").value="")},a.handleClearSearchTerm=function(e){a.setState({searchTerms:a.state.searchTerms.filter(function(t){return t!==e})})},a.handleApiKeyInput=function(e){a.setState({apiKey:e.target.value})},a.handleApiSecretInput=function(e){a.setState({apiSecret:e.target.value})},a.handleChannelUsernameInput=function(e){a.setState({channelUsername:e.target.value})},a.handleChannelPasswordInput=function(e){a.setState({channelPassword:e.target.value})},a.handleSearchOrderSelect=function(e){a.setState({searchOrder:e.target.value})},a.verifyDataAndCreateChannel=function(){var e=a.state,t=e.apiKey,n=e.apiSecret,c=e.channelPassword,r=e.channelUsername,s=e.searchTerms,l=e.searchOrder;t&&n&&c&&r&&l&&s.length>0?(a.setState({error:""}),a.props.onAddNewDailyMotionChannel(a.state)):a.setState({error:"please fill out all fields"})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("h5",{className:"px-2 mt-4 mb-3"},"Add new DailyMotion channel"),c.a.createElement("div",{style:{height:"60vh"},className:"overflow-auto"},this.state.error?c.a.createElement("div",{className:"alert alert-warning d-flex align-items-center"},c.a.createElement("span",null,this.state.error),c.a.createElement("i",{className:"material-icons ml-auto px-3 pointer",onClick:function(){return e.setState({error:""})}},"highlight_off")):"",c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"card shadow-sm w-50 p-3 mr-4"},c.a.createElement("div",{className:"mb-2"},c.a.createElement("label",{className:" form-control-sm",htmlFor:"apiKey"},"Api Key"),c.a.createElement("input",{type:"text",className:" form-control",id:"apiKey",onChange:this.handleApiKeyInput})),c.a.createElement("div",{className:"mb-2"},c.a.createElement("label",{className:" form-control-sm",htmlFor:"apiSecret"},"Api Secret"),c.a.createElement("input",{type:"text",className:" form-control",id:"apiSecret",onChange:this.handleApiSecretInput})),c.a.createElement("div",{className:"mb-2"},c.a.createElement("label",{className:" form-control-sm",htmlFor:"userName"},"Channel Username"),c.a.createElement("input",{type:"text",className:" form-control",id:"userName",onChange:this.handleChannelUsernameInput})),c.a.createElement("div",{className:"mb-2"},c.a.createElement("label",{className:" form-control-sm",htmlFor:"password"},"Channel Password"),c.a.createElement("input",{type:"text",className:" form-control",id:"password",onChange:this.handleChannelPasswordInput}))),c.a.createElement("div",{className:"card shadow-sm w-50 p-3"},c.a.createElement("h5",{className:"px-2 mb-3"},"Videos Settings"),c.a.createElement("div",{className:"mb-2"},c.a.createElement("label",{className:" form-control-sm"},"Search order"),c.a.createElement("select",{className:"custom-select ",id:"inputGroupSelect01",onChange:this.handleSearchOrderSelect},c.a.createElement("option",{defaultValue:!0},"Choose..."),c.a.createElement("option",{value:"date"},"Date"),c.a.createElement("option",{value:"rating"},"Rating"),c.a.createElement("option",{value:"relevance"},"Relevance"),c.a.createElement("option",{value:"title"},"Title"),c.a.createElement("option",{value:"viewCount"},"View count"))),c.a.createElement("div",{className:"form-group row mx-0"},c.a.createElement("label",{htmlFor:"searchTermsInput",className:" form-control-sm"},"Search Terms"),c.a.createElement("input",{type:"text",id:"searchTermsInput",className:"form-control ",placeholder:"# Add search terms ...",onKeyUp:this.handleSearchTermInput})),c.a.createElement("div",{className:"d-flex flex-wrap flex-reverse my-2"},this.state.searchTerms.map(function(t,a){return c.a.createElement("button",{key:a,className:"btn btn-outline-secondary py-0 mb-2 rounded px-2 mr-1 d-flex align-items-center",onClick:function(){return e.handleClearSearchTerm(t)}},c.a.createElement("span",{className:"mr-2"},t),c.a.createElement("i",{className:"material-icons md-18"},"clear"))})),c.a.createElement("div",{className:"d-flex "},c.a.createElement("button",{className:"ml-auto btn btn-success py-1 px-2",onClick:this.verifyDataAndCreateChannel},"Add Channel"))))))}}]),t}(n.Component);var N=function(e){var t=e.videoInfo;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement("div",{className:"pt-2 d-flex"},c.a.createElement("div",{className:""},c.a.createElement("img",{height:"140px",src:Object.values(t.snippet.thumbnails).sort(function(e,t){return t.width-e.width})[0].url,alt:""})),c.a.createElement("div",{className:"h-100 px-2"},c.a.createElement("h5",{className:""},t.snippet.title),c.a.createElement("div",null,c.a.createElement("span",null,t.snippet.channelTitle),c.a.createElement("span",{className:"px-2"},"\xb7"),c.a.createElement("span",{className:"mr-1"},t.statistics.viewCount),c.a.createElement("span",null,"views"),c.a.createElement("span",{className:"px-2"},"\xb7"),c.a.createElement("span",{className:"mr-1"},t.statistics.likeCount),c.a.createElement("span",null,"likes"),c.a.createElement("span",{className:"px-2"},"\xb7"),c.a.createElement("span",{className:"mr-1"},t.statistics.dislikeCount),c.a.createElement("span",null,"dislikes"),c.a.createElement("span",{className:"px-2"},"\xb7"),c.a.createElement("span",null,this.getUploadDate(t.snippet.publishedAt))),c.a.createElement("div",null,c.a.createElement("small",null,t.snippet.description.slice(0,250),"....")),c.a.createElement("div",null,t.snippet.tags.slice(0,15).map(function(e,t){return c.a.createElement("small",{key:t,className:"py-0 px-2 m-1 bg-secondary text-white rounded font-weight-lighter"},e)})))):c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("h5",null,"Videos being downloaded and uploaded will be displayed here")))},y=a(10),A=(a(31),a(32)),C=a(52),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={headers:{Accept:"application/json","Content-Type":"application/json"},running:!1,searching:!1,downloading:!1,uploading:!1,publishing:!1,switchingAccounts:!1,deletingAccount:!1,creatingChannel:!1,accounts:[],currentAccount:{},newAccountObject:null,videoInfo:!1,accountInfo:!1,accountId:null,filePath:"",publishUrl:""},a.handleDeleteAccount=function(){var e=a.state.accountInfo.upload.id;console.log("TCL: DailyTube -> handleDeleteAccount -> id",e),A.delete("/api/delete_account?account_id=".concat(e),{headers:a.state.headers}).then(function(e){console.log("TCL: YouTube -> response",e);var t=function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,a.fetchAllAccounts();case 3:e.t1=e.sent,e.t2={accounts:e.t1,accountInfo:!1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e.data.success&&t()}).catch()},a.addingNewDailyMotionChannel=function(){var e=a.state.newAccountObject,t=JSON.stringify(e);A.post("/api/create_new_account",t,{headers:a.state.headers}).then(function(e){e.data.success&&a.handleEditAccountInfo(e.data.accountId)}).catch()},a.handleAddNewDailyMotionChannel=function(e){console.log("TCL: newAccountObject",e),a.setState({newAccountObject:e,creatingChannel:!0})},a.getUploadDate=function(e){return C(e,"YYYYMMDD").fromNow()},a.handleEditAccountInfo=function(){var e=Object(f.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchAllAccounts();case 2:n=e.sent,a.setState({accountInfo:"loading",updateAccountId:t,accounts:n,creatingChannel:!1});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleRequestToDeleteAccount=function(){a.setState({deletingAccount:!0})},a.handleCancelRequestToDeleteAccount=function(){a.setState({deletingAccount:!1})},a.handleUpdateAccountSettings=function(){var e=Object(f.a)(p.a.mark(function e(t){var n,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.stringify(t),c=t.accountId,A.put("/api/update_account?account_id=".concat(c),n,{headers:a.state.headers}).then(function(e){var t=function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,a.fetchAllAccounts();case 3:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e.data.success&&t()}).catch(function(e){return console.error(e)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchAccountInfo=function(e){A.get("/api/get_account_info?account_id=".concat(e)).then(function(e){console.log("TCL: YouTube -> response",e.data),a.setState({accountInfo:e.data})}).catch(function(e){a.setState({accountInfo:!1})})},a.fetchAllAccounts=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/api/gets_all_accounts").then(function(e){console.log("TCL: fetchAllAccounts -> response",e),t=e.data.sort(function(e,t){return t.current-e.current})}).catch();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),a.fetchVideoInfo=function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get(t).then(function(e){a=e.data.items[0]}).catch();case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchAllVideos=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/api/get_all_video_ids").then(function(e){t=e.data}).catch();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),a.fetchUnUploadedAccountVideos=function(){var e=Object(f.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/api/get_un_uploaded_account_videos?account_id=".concat(t)).then(function(e){a=e.data}).catch();case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.switchAccounts=function(){var e,t,n=a.state.accounts.filter(function(e){return!!e.search_terms===e.queue_status}).sort(function(e,t){return e.id-t.id}),c=n.filter(function(e){return!0===e.current});c.length>0&&(e=(t=n.indexOf(c[0]))!==n.length-1?n[t+1].id:n[0].id);var r=JSON.stringify({isCurrent:!0});A.put("/api/update_account?account_id=".concat(e),r,{headers:a.state.headers}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){var n,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=7;break}return e.next=3,a.fetchAllAccounts();case 3:n=e.sent,c=n.filter(function(e){return!0===e.current})[0],console.log("TCL: DailyTube -> newCurrentAccount",c),a.setState({switchingAccounts:!1,accounts:n,searching:!0,currentAccount:c,videoInfo:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch()},a.getSearchResults=function(){var e=Object(f.a)(p.a.mark(function e(t,n){var c,r,s,l,o,i,u,m,h,v,g,E,b,w,x,N,C,S;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchAllVideos();case 2:return c=e.sent,r=c.map(function(e){return e.video_id}),s=new Date((new Date).setDate((new Date).getDate()-7)).toISOString(),l=t.map(function(e){var t="https://www.googleapis.com/youtube/v3/search?q=".concat(e,"&maxResults=50&type=video&videoLicense=youtube&order=").concat(n,"&publishedAfter=").concat(s,"&part=snippet&key=").concat(y.YOUTUBE_KEY);return A.get(t).then(function(e){var t=e.data.items.map(function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id.videoId,r.includes(a)){e.next=6;break}return n="https://www.googleapis.com/youtube/v3/videos?id=".concat(a,"&key=").concat(y.YOUTUBE_KEY,"&part=contentDetails,statistics"),e.abrupt("return",A.get(n).then(function(e){var t=e.data.items[0];try{return t&&!t.contentDetails.licensedContent?t:null}catch(a){return null}}));case 6:console.log("Duplicate");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());return Promise.all(t)})}),e.next=8,Promise.all(l);case 8:o=e.sent,i=[],u=!0,m=!1,h=void 0,e.prev=13,v=o[Symbol.iterator]();case 15:if(u=(g=v.next()).done){e.next=39;break}for(E=g.value,b=!0,w=!1,x=void 0,e.prev=20,N=E[Symbol.iterator]();!(b=(C=N.next()).done);b=!0)(S=C.value)&&(i=[].concat(Object(d.a)(i),[S]));e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),w=!0,x=e.t0;case 28:e.prev=28,e.prev=29,b||null==N.return||N.return();case 31:if(e.prev=31,!w){e.next=34;break}throw x;case 34:return e.finish(31);case 35:return e.finish(28);case 36:u=!0,e.next=15;break;case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(13),m=!0,h=e.t1;case 45:e.prev=45,e.prev=46,u||null==v.return||v.return();case 48:if(e.prev=48,!m){e.next=51;break}throw h;case 51:return e.finish(48);case 52:return e.finish(45);case 53:return e.abrupt("return",i.sort(function(e,t){return t.statistics.viewCount-e.statistics.viewCount}));case 54:case"end":return e.stop()}},e,null,[[13,41,45,53],[20,24,28,36],[29,,31,35],[46,,48,52]])}));return function(t,a){return e.apply(this,arguments)}}(),a.searchForVideos=Object(f.a)(p.a.mark(function e(){var t,n,c,r,s,l,o,i,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentAccount,n=t.search_terms,c=t.search_order,r=t.id,e.next=3,a.fetchUnUploadedAccountVideos(r);case 3:if(!e.sent.length){e.next=6;break}return e.abrupt("return",a.setState({searching:!1,downloading:!0}));case 6:return s=n.split(","),l=c,e.next=10,a.getSearchResults(s,l);case 10:if((o=e.sent).length){e.next=13;break}return e.abrupt("return",a.setState({searching:!1,switchingAccounts:!0}));case 13:i=o.map(function(e){return e.id}),i=Object(d.a)(new Set(i)).splice(0,10),console.log("TCL: searchForVideos -> searchIds",i),u=JSON.stringify({searchIds:i}),A.put("/api/update_account?account_id=".concat(r),u,{headers:a.state.headers}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.data.success&&a.setState({searching:!1,downloading:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){a.setState({searching:!1,switchingAccounts:!0})});case 18:case"end":return e.stop()}},e)})),a.downloadVideo=Object(f.a)(p.a.mark(function e(){var t,n,c,r,s,l,o,i,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.videoInfo,c=t.filePath,n){e.next=13;break}return r=a.state.currentAccount.id,e.next=5,a.fetchUnUploadedAccountVideos(r);case 5:return s=e.sent,l=s[0].video_id,o="https://www.googleapis.com/youtube/v3/videos?id=".concat(l,"&key=").concat(y.YOUTUBE_KEY,"&part=snippet,statistics"),e.next=10,a.fetchVideoInfo(o);case 10:return i=e.sent,console.log("TCL: downloadVideo -> videoInfo",i),e.abrupt("return",a.setState({videoInfo:i}));case 13:u=JSON.stringify({videoId:n.id,title:n.snippet.title,filePath:c}),A.post("/api/download_video",u,{headers:a.state.headers}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TCL: downloadVideo -> response",t.data.message),t.data.success?a.setState({downloading:!1,uploading:!0,filePath:t.data.file_path}):a.setState({downloading:!1,switchingAccounts:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){a.setState({downloading:!1,switchingAccounts:!0})});case 15:case"end":return e.stop()}},e)})),a.uploadVideo=Object(f.a)(p.a.mark(function e(){var t,n,c,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.filePath,n=a.state.currentAccount.id,e.next=4,a.fetchUnUploadedAccountVideos(n);case 4:c=e.sent,r=c[0].video_id,console.log("TCL: uploadVideo -> filePath",t),s=JSON.stringify({filePath:t,videoId:r}),A.post("/api/upload_video?account_id=".concat(n),s,{headers:a.state.headers}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TCL: uploadVideo -> response",t.data.message),t.data.success?a.setState({uploading:!1,publishing:!0,publishUrl:t.data.publish_url}):a.setState({uploading:!1,switchingAccounts:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){a.setState({uploading:!1,switchingAccounts:!0})});case 9:case"end":return e.stop()}},e)})),a.publishVideo=Object(f.a)(p.a.mark(function e(){var t,n,c,r,s,l,o,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.publishUrl,console.log("TCL: publishVideo -> publishUrl",t),n=a.state.currentAccount.id,e.next=5,a.fetchUnUploadedAccountVideos(n);case 5:return c=e.sent,r=c[0].video_id,s="https://www.googleapis.com/youtube/v3/videos?id=".concat(r,"&key=").concat(y.YOUTUBE_KEY,"&part=snippet"),e.next=10,a.fetchVideoInfo(s);case 10:l=e.sent,(o=Object.values(l.snippet.thumbnails)).sort(function(e,t){return t.width-e.width}),i=JSON.stringify({videoId:l.id,publishUrl:t,title:l.snippet.title,tags:l.snippet.tags||[],description:l.snippet.description,thumbnailUrl:o[0].url}),A.post("/api/publish_video?account_id=".concat(n),i,{headers:a.state.headers}).then(function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TCL: publishVideo -> response",t.data.message),t.data.success?a.setState({switchingAccounts:!0,publishing:!1,publishUrl:""}):a.setState({publishing:!1,switchingAccounts:!0});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){a.setState({publishing:!1,switchingAccounts:!0})});case 15:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllAccounts();case 2:t=e.sent,console.log("TCL: DailyTube -> componentDidMount -> accounts",t),t.length?(a=t.filter(function(e){return!0===e.current})[0],this.setState({accounts:t,currentAccount:a})):this.setState({accounts:null,currentAccount:null});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.running,a=e.searching,n=e.downloading,c=e.uploading,r=e.publishing,s=e.switchingAccounts,l=e.accountInfo,o=e.updateAccountId,i=e.creatingChannel;"loading"===l&&this.fetchAccountInfo(o),i&&this.addingNewDailyMotionChannel(),t&&(s&&this.switchAccounts(),a&&this.searchForVideos(),n&&this.downloadVideo(),c&&this.uploadVideo(),r&&this.publishVideo())}},{key:"render",value:function(){var e=this,t=this.state,a=t.accounts,n=t.accountInfo,r=t.deletingAccount,s=t.currentAccount,l=t.searching,o=t.downloading,i=t.uploading,u=t.switchingAccounts,m=t.publishing,d=t.videoInfo,h=t.creatingChannel;return c.a.createElement("div",{className:"d-flex flex-column position-relative fullscreen"},r?c.a.createElement(w,{account:n,onCancelRequestToDeleteAccount:this.handleCancelRequestToDeleteAccount,onDeleteAccount:this.handleDeleteAccount}):"",c.a.createElement("div",{className:"row m-0"},c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("button",{className:"btn btn-success py-0 px-4 m-2",onClick:function(){return e.setState({running:!0,switchingAccounts:!0})}},"Start"),c.a.createElement("button",{className:"btn btn-warning py-0 px-4 m-2",onClick:function(){return e.setState({running:!1})}},"Stop")),c.a.createElement("div",{className:"d-flex flex-column"},null!==a?c.a.createElement(v,{accounts:a,onEditAccountInfo:this.handleEditAccountInfo}):c.a.createElement("div",null,null===a?c.a.createElement("span",{className:"text-warning"},"No accounts have been added yet"):c.a.createElement("div",null,c.a.createElement("span",null,"Loading Accounts"))))),c.a.createElement("div",{className:"col-sm-9 py-2"},n?c.a.createElement(b,{account:n,onRequestToDeleteAccount:this.handleRequestToDeleteAccount,onUpdateAccountSettings:this.handleUpdateAccountSettings,onAddNewAccount:function(){return e.setState({accountInfo:!1})}}):c.a.createElement("div",null,h?c.a.createElement("div",{className:"col-sm-9 d-flex h-100 w-100"},c.a.createElement("div",{className:"mx-auto my-auto d-flex align-items-center"},c.a.createElement("h4",{className:"mr-3"},"Loading Account Details"),c.a.createElement("img",{height:"50px",src:E.a,alt:""}))):c.a.createElement(x,{handle:!0,onAddNewDailyMotionChannel:this.handleAddNewDailyMotionChannel})))),c.a.createElement("div",{className:"bg-light h-100"},c.a.createElement("div",{className:"d-flex"},s?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"px-2 bg-info "},s.user_name),c.a.createElement("div",{className:"px-2 ".concat(l?"bg-success":"bg-white")},c.a.createElement("span",null,"searching")),c.a.createElement("div",{className:"px-2 ".concat(o?"bg-success":"bg-white")},c.a.createElement("span",null,"downloading")),c.a.createElement("div",{className:"px-2 ".concat(i?"bg-success":"bg-white")},c.a.createElement("span",null,"uploading")),c.a.createElement("div",{className:"px-2 ".concat(m?"bg-success":"bg-white")},c.a.createElement("span",null,"publishing")),c.a.createElement("div",{className:"px-2 ".concat(u?"bg-success":"bg-white")},c.a.createElement("span",null,"switchingAccounts"))):c.a.createElement("span",null,"waiting for current account")),c.a.createElement(N,{videoInfo:d})))}}]),t}(n.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(S,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.9836eaab.chunk.js.map